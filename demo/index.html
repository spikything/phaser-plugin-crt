<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>phaser-plugin-crt demo</title>
    <style>
      html, body { height: 100%; margin: 0; background:#111; color:#ddd; font-family: system-ui, sans-serif; }
      #game { width: 100%; height: 100%; }
      .controls { position: fixed; top: 12px; left: 12px; background: rgba(0,0,0,0.6); padding: 10px 12px; border-radius: 10px; }
      .controls button { margin-right: 8px; }
      a { color: #7dd3fc; }
    </style>
  </head>
  <body>
    <div class="controls">
      <button id="toggle">Toggle CRT (P)</button>
      <button id="random">Randomize wobble</button>
      <span>â€” Powered by <a href="https://github.com/spikything/phaser-plugin-crt">phaser-plugin-crt</a></span>
    </div>
    <div id="game"></div>

    <!-- Phaser CDN -->
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.80.0/dist/phaser.js"></script>
    <!-- The plugin UMD build -->
    <script src="../dist-prebuilt/phaser-plugin-crt.umd.js"></script>
    <script>
      const { CRTPlugin } = PhaserPluginCRT;

      class DemoScene extends Phaser.Scene {
        preload() {
          this.load.image('logo', 'https://labs.phaser.io/assets/sprites/phaser3-logo.png');
          this.load.image('bg', 'https://labs.phaser.io/assets/skies/deepblue.png');
        }
        create() {
          this.add.image(400, 300, 'bg').setScale(0.8);
          const logo = this.add.image(400, 300, 'logo');
          this.tweens.add({ targets: logo, angle: 360, duration: 8000, repeat: -1 });

          // Map plugin
          this.plugins.installScenePlugin('CRTPlugin', CRTPlugin, 'crt', this);

          // Enable with some defaults
          this.crt.enable({
            curvature: 0.18,
            scanlineIntensity: 0.16,
            wobbleAmp: 0.001
          });

          const key = this.input.keyboard.addKey('P');
          key.on('down', () => this.crt.toggle());

          document.getElementById('toggle').onclick = () => this.crt.toggle();
          document.getElementById('random').onclick = () => this.crt.update({ wobbleAmp: Math.random() * 0.002 });
        }
      }

      const config = {
        type: Phaser.AUTO,
        parent: 'game',
        width: 800,
        height: 600,
        backgroundColor: '#000000',
        scene: [DemoScene]
      };

      new Phaser.Game(config);
    </script>
  </body>
</html>
